<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actividades - PEMSAM</title>
    <link rel="stylesheet" href="styles.css">
     <style>
/* Estilos extraídos de juegos.html */


/* Ajustes de tarjetas de juegos */
.games-grid .game-card{display:flex;flex-direction:column}
.games-grid .game-card p{margin-bottom:10px}
.games-grid .game-card .play-game-btn{margin-top:auto}

/* Subrayado multicolor para menús (hover) y animaciones */
#main-nav a, #dropdown-menu a, .footer .footer-content a { text-decoration: none; }
#main-nav a:hover, #dropdown-menu a:hover, .footer .footer-content a:hover {
  text-decoration: underline;
  text-underline-offset: 4px;
  text-decoration-thickness: 3px;
  animation: underlineHue 6s linear infinite;
}
@keyframes underlineHue {
  0% { text-decoration-color: var(--azul); }
  33% { text-decoration-color: var(--amarillo); }
  66% { text-decoration-color: var(--verde); }
  100% { text-decoration-color: var(--azul); }
}
/* Animación de aparición de tarjetas */
.games-grid .game-card { animation: fadeUp .6s ease both; }
.games-grid .game-card:nth-child(1){animation-delay:.05s}
.games-grid .game-card:nth-child(2){animation-delay:.1s}
.games-grid .game-card:nth-child(3){animation-delay:.15s}
.games-grid .game-card:nth-child(4){animation-delay:.2s}
.games-grid .game-card:nth-child(5){animation-delay:.25s}
.games-grid .game-card:nth-child(6){animation-delay:.3s}
.games-grid .game-card:nth-child(7){animation-delay:.35s}
.games-grid .game-card:nth-child(8){animation-delay:.4s}
.games-grid .game-card:nth-child(9){animation-delay:.45s}
.games-grid .game-card:nth-child(10){animation-delay:.5s}
.games-grid .game-card:nth-child(11){animation-delay:.55s}
.games-grid .game-card:nth-child(12){animation-delay:.6s}
@keyframes fadeUp { from { opacity:0; transform: translateY(10px);} to { opacity:1; transform: translateY(0);} }
/* Hover en botones de juego */
.play-game-btn { transition: transform .15s ease, box-shadow .15s ease; }
.play-game-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 14px rgba(0,0,0,.12); }
/* Avatar del asistente con flotación sutil */
.mascot-avatar { animation: floatY 3s ease-in-out infinite; }
@keyframes floatY { 0%,100%{ transform: translateY(0);} 50%{ transform: translateY(-4px);} }
/* Título de sección con brillo suave */
.games-section h2 { position: relative; display: inline-block; animation: titleGlow 2.2s ease-in-out infinite; }
@keyframes titleGlow { 0%,100%{ text-shadow: 0 0 0 rgba(0,0,0,0);} 50%{ text-shadow: 0 2px 10px rgba(6,9,102,.25);} }
/* Desactivar interacción del fondo cuando el modal está abierto */
body.modal-open { overflow: hidden; }
body.modal-open > *:not(#game-frame-modal) { pointer-events: none !important; }
    </style>
    <style>
      /* Controles móviles para juegos en modal */
      .mobile-controls { display: none; position: fixed; left: 50%; transform: translateX(-50%); bottom: 16px; z-index: 4001; align-items: center; gap: 14px; padding: 6px 10px; }
      .mobile-controls .dpad { display: grid; grid-template-columns: 48px 48px 48px; grid-template-rows: 48px 48px 48px; gap: 6px; }
      .mobile-controls button { width: 48px; height: 48px; border-radius: 12px; border: 2px solid var(--azul); background: #fff; color: var(--azul); font-size: 1.2rem; font-weight: 800; box-shadow: 0 4px 10px rgba(0,0,0,.12); }
      .mobile-controls button.action { width: 70px; height: 70px; border-radius: 50%; font-size: 1.1rem; }
      .mobile-controls button.active { background: var(--amarillo); color: var(--azul); }
      body.modal-open .mobile-controls { display: flex; }
      @media (hover: hover) and (pointer: fine) { .mobile-controls { display: none !important; } }
    </style>
    <link rel="icon" href="imagenes/iconopemsam.svg" type="image/svg+xml">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <header id="main-header">
        <div class="brand-row">
            <img src="imagenes/colsam_logo.svg" alt="Escudo" class="escudo-fijo">
            <div class="logo">PEMSAM</div>
        </div>
        <nav id="main-nav">
            <a href="index.html">INICIO</a>
            <a href="nosotros.html">NOSOTROS</a>
            <a href="juegos.html" class="active">ACTIVIDADES</a>
            <a href="contactanos.html">CONTACTANOS</a>
            <a href="https://www.colsam.edu.co/" target="_blank">SAN ALBERTO MAGNO</a>
        </nav>
        <div class="hamburger" id="hamburger-menu">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="dropdown-menu" id="dropdown-menu">
            <a href="index.html">INICIO</a>
            <a href="nosotros.html">NOSOTROS</a>
            <a href="juegos.html" class="active">ACTIVIDADES</a>
            <a href="contactanos.html">CONTACTANOS</a>
            <a href="https://www.colsam.edu.co/" target="_blank">SAN ALBERTO MAGNO</a>
        </div>
        <div id="menu-backdrop" class="menu-backdrop" aria-hidden="true"></div>
    </header>

    <section class="games-section">
        <h2>Actividades</h2>
        <div class="games-grid">
            <div class="game-card">
                <div class="game-icon"><i class="fas fa-running"></i></div>
                <h3>Carrera de Obstáculos</h3>
                <p>Supera obstáculos y mejora tu agilidad.</p>
                <a href="#" class="play-game-btn" data-game="obstacle">Jugar</a>
            </div>
            <div class="game-card">
                <div class="game-icon"><i class="fas fa-bullseye"></i></div>
                <h3>Puntería</h3>
                <p>Desarrolla tu precisión y coordinación.</p>
                <a href="#" class="play-game-btn" data-game="aim">Jugar</a>
            </div>
            <div class="game-card">
                <div class="game-icon"><i class="fas fa-puzzle-piece"></i></div>
                <h3>Rompecabezas</h3>
                <p>Resuelve puzzles para estimular tu mente.</p>
                <a href="#" class="play-game-btn" data-game="puzzle">Jugar</a>
            </div>
            <div class="game-card">
                <div class="game-icon"><i class="fas fa-tree"></i></div>
                <h3>Ascenso al Árbol</h3>
                <p>Escala y mejora tu fuerza y equilibrio.</p>
                <a href="#" class="play-game-btn" data-game="tree">Jugar</a>
            </div>
            <div class="game-card">
                <div class="game-icon"><i class="fas fa-drum"></i></div>
                <h3>Teclado Musical</h3>
                <p>Aprende música y ritmo jugando.</p>
                <a href="#" class="play-game-btn" data-game="music">Jugar</a>
            </div>
            <div class="game-card">
                <div class="game-icon"><i class="fas fa-paw"></i></div>
                <h3>Identificación de Animales</h3>
                <p>Reconoce animales y aprende sobre ellos.</p>
                <a href="#" class="play-game-btn" data-game="animals">Jugar</a>
            </div>
        <div class="game-card">
                <div class="game-icon"><i class="fas fa-bomb"></i></div>
                <h3>Busca Minas</h3>
                <p>Descubre casillas sin detonar las minas.</p>
                <a href="#" class="play-game-btn" data-game="buscamina">Jugar</a>
            </div>
            <div class="game-card">
                <div class="game-icon"><i class="fas fa-table-tennis-paddle-ball"></i></div>
                <h3>Ping Pong</h3>
                <p>Desafía a la CPU en un clásico Ping Pong.</p>
                <a href="#" class="play-game-btn" data-game="pingpong">Jugar</a>
            </div>
            <div class="game-card">
                <div class="game-icon"><i class="fas fa-paint-brush"></i></div>
                <h3>Colorear</h3>
                <p>Elige colores y pinta una escena divertida.</p>
                <a href="#" class="play-game-btn" data-game="colorear">Jugar</a>
            </div>
            <div class="game-card">
                <div class="game-icon"><i class="fas fa-palette"></i></div>
                <h3>Colores</h3>
                <p>Haz clic en el color que se ilumina.</p>
                <a href="#" class="play-game-btn" data-game="colores">Jugar</a>
            </div>
            <div class="game-card">
                 <div class="game-icon"><i class="fas fa-music"></i></div>
                <h3>Simon</h3>
                <p>Memoriza y repite la secuencia de luces y sonidos.</p>
                <a href="#" class="play-game-btn" data-game="simon">Jugar</a>
            </div>
                        <div class="game-card">
                <div class="game-icon"><i class="fas fa-brain"></i></div>
                <h3>Memorama</h3>
                <p>Encuentra todas las parejas de animales.</p>
                <a href="#" class="play-game-btn" data-game="memorama">Jugar</a>
            </div>
            <div class="game-card">
                <div class="game-icon"><i class="fas fa-pencil-alt"></i></div>
                <h3>Dibujo libre</h3>
                <p>Pinta con diferentes colores y pinceles.</p>
                <a href="#" class="play-game-btn" data-game="dibujo">Jugar</a>
            </div>
            <div class="game-card">
                <div class="game-icon"><i class="fas fa-gamepad"></i></div>
                <h3>Snake</h3>
                <p>Controla la serpiente y come la comida sin chocar.</p>
                <a href="#" class="play-game-btn" data-game="snake">Jugar</a>
            </div>
            <div class="game-card">
                <div class="game-icon"><i class="fas fa-gamepad"></i></div>
                <h3>LABERINTO</h3>
                <p>Lleva al conejo a comerse una rica zanahoria.</p>
                <a href="#" class="play-game-btn" data-game="LABERINTO">Jugar</a>
            </div>
            <div class="game-card">
                <div class="game-icon"><i class="fas fa-dragon"></i></div>
                <h3>Flappy Dino</h3>
                <p>Esquiva los huesos y consigue la mayor puntuación.</p>
                <a href="#" class="play-game-btn" data-game="flappydino">Jugar</a>
            </div>
                                                                    </div>
        
    </section>

        
    <!-- Modal genérico con iframe para cargar juegos externos -->
    <div id="game-frame-modal" class="game-modal">
        <div class="game-modal-content">
            <span class="close-modal">&times;</span>
            <button id="bgm-toggle" aria-label="Música" title="Música" style="position:absolute;left:16px;top:10px;border:2px solid var(--azul);background:var(--blanco);color:var(--azul);border-radius:20px;padding:4px 10px;cursor:pointer;z-index:2">🔈</button>
            <h3 id="game-frame-title">Juego</h3>
            <div style="width:90vw;max-width:900px;height:90vh;max-height:90vh;margin:10px auto;border:2px solid var(--azul);border-radius:10px;overflow:hidden;">
                <iframe id="game-iframe" src="" title="Juego" style="width:100%;height:100%;border:0; overflow:hidden;" scrolling="no"></iframe>
            </div>
            <audio id="game-bgm" src="imagenes/bgm.mp3" preload="auto" loop></audio>
        </div>
    </div>

    <div class="mobile-controls" aria-label="Controles táctiles">
      <div class="dpad">
        <div></div><button type="button" data-key="ArrowUp" aria-label="Arriba">▲</button><div></div>
        <button type="button" data-key="ArrowLeft" aria-label="Izquierda">◀</button><div></div><button type="button" data-key="ArrowRight" aria-label="Derecha">▶</button>
        <div></div><button type="button" data-key="ArrowDown" aria-label="Abajo">▼</button><div></div>
      </div>
      <button class="action" type="button" data-key="Space" aria-label="Acción">⨀</button>
    </div>
            
    <footer id="contacto" class="footer">
        <div class="footer-wave">
            <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z" fill="var(--azul)"></path>
                <path d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z" fill="var(--azul)"></path>
                <path d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z" fill="var(--azul)"></path>
            </svg>
        </div>
        
        <div class="footer-content footer-inline">
          <div class="footer-brand">
            <img src="imagenes/iconopemsam.svg" alt="PEMSAM" />
          </div>
          <div class="footer-column">
            <h3>Contacto</h3>
            <div class="contact-info">
              <p><i class="fas fa-envelope"></i> grupopemsam@gmail.com</p>
              <p><i class="fas fa-map-marker-alt"></i> Colegio San Alberto Magno Cra. 3c #9171, Barranquilla, Atlántico</p>
            </div>
            <div class="social-links">
              <a href="https://www.facebook.com/colegiosanalbertomagnobarranquilla/" aria-label="Facebook" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook-f"></i></a>
              <a href="https://www.instagram.com/colsambarranquilla/" aria-label="Instagram" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
            </div>
          </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2024-2025 PEMSAM. Todos los derechos reservados.</p>
            <div class="footer-links">
                <a href="#">Política de privacidad</a>
                 <a href="tyc.html">Términos y Condiciones</a>
                <a href="faqs.html">FAQS</a>
                <a href="#">Cookies</a>
            </div>
        </div>
    </footer>

    <script>
      // Mostrar footer cuando entra al viewport
      (function(){
        try{
          var footer = document.querySelector('.footer');
          if(!footer) return;
          var obs = new IntersectionObserver(function(entries, o){
            entries.forEach(function(e){
              if(e.isIntersecting){ footer.classList.add('is-visible'); o.unobserve(e.target); }
            });
          }, { threshold: 0.15 });
          obs.observe(footer);
        }catch(e){}
      })();
    </script>

    <script>
// Lógica de cabecera con animación
(function(){
  const header = document.getElementById('main-header');
  const nav = document.getElementById('main-nav');
  const hamburger = document.getElementById('hamburger-menu');
  const dropdown = document.getElementById('dropdown-menu');
  const backdrop = document.getElementById('menu-backdrop');

  let lastScrollY = window.scrollY;
  let ticking = false;

  function openMenu(){ dropdown.classList.add('show'); hamburger.classList.add('active'); backdrop.classList.add('show'); }
  function closeMenu(){ dropdown.classList.remove('show'); hamburger.classList.remove('active'); backdrop.classList.remove('show'); }

  if (hamburger) {
    hamburger.addEventListener('click', () => {
      if (dropdown.classList.contains('show')) { closeMenu(); } else { openMenu(); }
    });
  }
  document.querySelectorAll('#dropdown-menu a').forEach(a=>{
    a.addEventListener('click', ()=> closeMenu());
  });
  if (backdrop) backdrop.addEventListener('click', closeMenu);
  window.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') closeMenu(); });

  function handleHeaderScroll() {
    if(window.scrollY > 50) {
      header.classList.add('sticky');
      header.classList.add('animated-scroll');
      nav.classList.add('hide');
      hamburger.classList.add('show');
    } else {
      header.classList.remove('sticky');
      header.classList.remove('animated-scroll');
      nav.classList.remove('hide');
      hamburger.classList.remove('show');
      dropdown.classList.remove('show');
      hamburger.classList.remove('active');
      backdrop.classList.remove('show');
    }
  }

  window.addEventListener('scroll', () => {
    if (!ticking) {
      window.requestAnimationFrame(() => {
        handleHeaderScroll();
        ticking = false;
      });
      ticking = true;
    }
  });
  handleHeaderScroll();
})();

// Lanzador de juegos por iframe
(function(){
  const MAP = {
    obstacle: 'juegos/obstacle/index.html',
    aim: 'juegos/aim/index.html',
    puzzle: 'juegos/puzzle/puzzle.html',
    tree: 'juegos/tree/index.html',
    maze: 'juegos/maze/index.html',
    music: 'juegos/music/music.html',
    animals: 'juegos/animals/index.html',
    buscamina: 'juegos/buscaminas/index.html',
    pingpong: 'juegos/pingpong/index.html',
    colorear: 'juegos/colorear/index.html',
    colores: 'juegos/colores/index.html',
    simon: 'juegos/simon/index.html',
    memorama: 'juegos/memorama/index.html',
    dibujo: 'juegos/dibujo/index.html',
    snake: 'juegos/snake/index.html',
    LABERINTO: 'juegos/LABERINTO/index.html',
    flappydino: 'juegos/Flappy%20Dino/index.html'
  };
  const modal = document.getElementById('game-frame-modal');
  const iframe = document.getElementById('game-iframe');
  const title = document.getElementById('game-frame-title');
  const bgm = document.getElementById('game-bgm');
  const bgmToggle = document.getElementById('bgm-toggle');
  if (!modal || !iframe) return;
  let bgmReady = false;
  let keydownHandler, wheelHandler, touchmoveHandler;
    function fitIframeToContent(){
    try{
      const container = iframe.parentElement;
      if (container) { container.style.position = 'relative'; }
      if(!container) return;
      const cw = container.clientWidth;
      const ch = container.clientHeight;
      const doc = iframe.contentDocument || iframe.contentWindow?.document;
      if(!doc) return;
      // Detect natural content size
      let naturalW = doc.documentElement?.scrollWidth || doc.body?.scrollWidth || 800;
      let naturalH = doc.documentElement?.scrollHeight || doc.body?.scrollHeight || 600;
      const cvs = doc.querySelector('canvas');
      if (cvs && cvs.width && cvs.height) { naturalW = cvs.width; naturalH = cvs.height; }
      const wrap = doc.querySelector('.ctn, #game, #container, .game-container');
      if (wrap) {
        const ow = wrap.offsetWidth || wrap.clientWidth;
        const oh = wrap.offsetHeight || wrap.clientHeight;
        if (ow && oh) { naturalW = ow; naturalH = oh; }
      }
      // Compute scale and center (usar el máximo que quepa con margen mínimo)
      const baseScale = Math.min(cw / naturalW, ch / naturalH);
      const scale = Math.max(0, baseScale * 0.995); // ~0.5% de margen para evitar recortes por redondeo
      iframe.style.width = naturalW + 'px';
      iframe.style.height = naturalH + 'px';
      iframe.style.position = 'absolute';
      iframe.style.left = '50%';
      iframe.style.top = '50%';
      iframe.style.margin = '0';
      iframe.style.transformOrigin = 'top left';
      iframe.style.transform = `translate(-50%, -50%) scale(${scale})`;
    }catch(e){ /* noop */ }
  }
  function ensureBgm(){
    if (!bgm) return;
    if (!bgmReady) { bgm.muted = false; bgmReady = true; }
    bgm.play().catch(()=>{});
    if (bgmToggle) bgmToggle.textContent = bgm.muted ? '🔇' : '🔊';
  }
  function stopBgm(){ if (bgm) bgm.pause(); }
  if (bgmToggle) {
    bgmToggle.addEventListener('click', ()=>{
      if (!bgm) return;
      if (bgm.paused) { ensureBgm(); } else { bgm.pause(); }
      bgmToggle.textContent = (bgm.paused || bgm.muted) ? '🔇' : '🔊';
    });
  }
  function open(game){
    const url = MAP[game];
    if(!url || !modal || !iframe){ return; }
    if (title) {
      const t = document.querySelector(`[data-game="${game}"]`)?.closest('.game-card')?.querySelector('h3')?.textContent
          || document.querySelector(`.footer-column a[data-game="${game}"]`)?.textContent || 'Juego';
      title.textContent = t;
    }
    // Mostrar modal y preparar entorno aislado
    iframe.src = url;
    modal.style.display = 'flex';
    document.body.classList.add('modal-open');
        // Bloquear teclas y scroll del documento padre mientras el modal esté abierto
    keydownHandler = (e)=>{
      // Bloquear casi todas las teclas para evitar scroll/atajos en el fondo
      const blocked = [' ', 'Spacebar', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'PageUp', 'PageDown', 'Home', 'End', 'Tab'];
      if (blocked.includes(e.key) || e.key.length === 1) { e.preventDefault(); e.stopPropagation(); }
    };
    wheelHandler = (e)=>{ e.preventDefault(); e.stopPropagation(); };
    touchmoveHandler = (e)=>{ e.preventDefault(); e.stopPropagation(); };
    window.addEventListener('keydown', keydownHandler, { capture: true });
    window.addEventListener('wheel', wheelHandler, { passive: false });
    window.addEventListener('touchmove', touchmoveHandler, { passive: false });
    // Asegurar foco en el iframe para que reciba las teclas del juego
    try { iframe.tabIndex = "0"; setTimeout(()=> iframe.focus(), 50); } catch(_){}
    ensureBgm();
    setTimeout(fitIframeToContent, 80);
  }
  function close(){
    if(!modal || !iframe) return;
    modal.style.display='none';
    iframe.src='';
    // Restaurar interacción del fondo
    document.body.classList.remove('modal-open');
    if (keydownHandler) { window.removeEventListener('keydown', keydownHandler, true); keydownHandler = null; }
    if (wheelHandler) { window.removeEventListener('wheel', wheelHandler); wheelHandler = null; }
    if (touchmoveHandler) { window.removeEventListener('touchmove', touchmoveHandler); touchmoveHandler = null; }
        stopBgm();
  }
  document.querySelectorAll('.play-game-btn, .footer-column ul li a[data-game]').forEach(el=>{
    el.addEventListener('click', function(e){ e.preventDefault(); open(el.getAttribute('data-game')); });
  });
  modal?.querySelector('.close-modal')?.addEventListener('click', close);
  modal?.addEventListener('click', (e)=>{ if(e.target===modal) close(); });

  // Ajuste de escala del iframe en carga y al redimensionar
  if (iframe) {
    iframe.addEventListener('load', ()=> { setTimeout(fitIframeToContent, 60); });
  }
  window.addEventListener('resize', ()=> { setTimeout(fitIframeToContent, 0); });

  // Controles táctiles -> envían teclas al juego
  (function(){
    const controls = document.querySelector('.mobile-controls');
    if (!controls) return;
    function sendKey(type, key) {
      try {
        const win = iframe?.contentWindow;
        if (!win) return;
        const evt = new KeyboardEvent(type, { key: key === 'Space' ? ' ' : key, code: key, bubbles: true });
        win.dispatchEvent(evt);
        win.document.dispatchEvent(evt);
      } catch(e){}
    }
    function bind(btn){
      const key = btn.dataset.key;
      let active = false;
      const down = (e)=>{ e.preventDefault(); if (active) return; active = true; btn.classList.add('active'); sendKey('keydown', key); };
      const up = (e)=>{ e.preventDefault(); if (!active) return; active = false; btn.classList.remove('active'); sendKey('keyup', key); };
      btn.addEventListener('pointerdown', down);
      btn.addEventListener('pointerup', up);
      btn.addEventListener('pointercancel', up);
      btn.addEventListener('pointerleave', up);
    }
    controls.querySelectorAll('button[data-key]').forEach(bind);
  })();
})();

    </script>
</body>
</html>
