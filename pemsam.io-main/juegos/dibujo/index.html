<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dibujo libre</title>
  <style>
    :root { --azul:#069; --amarillo:#fc0; --verde:#393; --negro:#1d1d1b; --blanco:#fff; }
    *{box-sizing:border-box}
    html, body{height:100%; overflow:hidden}
    body{margin:0;font-family:'Segoe UI',Arial,sans-serif;background:#f3f5f8;color:#234;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:16px}
    .panel{background:#fff;border:3px solid var(--azul);border-radius:16px;box-shadow:0 16px 36px rgba(0,0,0,.14);width:min(92vw,980px);padding:18px}
    h1{margin:0 0 8px 0;color:var(--azul)}
    p{margin:0 0 12px 0;color:#456}
    .toolbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:6px 0 10px 0}
    .color-picker{display:flex;gap:6px}
    .color-picker span{width:24px;height:24px;border-radius:6px;border:2px solid #0002;cursor:pointer}
    .brush-size button,.clear-btn{border:2px solid var(--azul);background:var(--azul);color:#fff;border-radius:8px;padding:6px 10px;font-weight:700;cursor:pointer}
    .brush-size button:hover,.clear-btn:hover{background:var(--amarillo);color:var(--azul)}
    #drawingCanvas{width:100%;height:360px;border:2px solid var(--azul);border-radius:12px;background:#fff}
  </style>
</head>
<body>
  <div class="panel" role="application" aria-label="Dibujo libre">
    <h1>Dibujo libre</h1>
    <p>Elige un color y pinta con diferentes tama침os de pincel.</p>
    <div class="toolbar">
      <div class="color-picker">
        <span style="background:red"></span>
        <span style="background:blue"></span>
        <span style="background:green"></span>
        <span style="background:yellow"></span>
        <span style="background:black"></span>
      </div>
      <div class="brush-size">
        <button id="thin">Delgado</button>
        <button id="medium">Medio</button>
        <button id="thick">Grueso</button>
      </div>
      <button class="clear-btn" id="clearBtn">Limpiar</button>
    </div>
    <canvas id="drawingCanvas"></canvas>
  </div>

  <script>
    let isDrawing = false;
    let currentDrawingColor = 'black';
    let brushSize = 5;
    let ctx;

    function setup(){
      const canvas = document.getElementById('drawingCanvas');
      ctx = canvas.getContext('2d');
      // Ajustar tama침o al contenedor visible
      canvas.width = canvas.offsetWidth; canvas.height = canvas.offsetHeight;
      // Rat칩n
      canvas.addEventListener('mousedown', startDrawing);
      canvas.addEventListener('mousemove', draw);
      canvas.addEventListener('mouseup', stopDrawing);
      canvas.addEventListener('mouseout', stopDrawing);
      // T치ctil
      canvas.addEventListener('touchstart', handleTouchStart, {passive:false});
      canvas.addEventListener('touchmove', handleTouchMove, {passive:false});
      canvas.addEventListener('touchend', stopDrawing);
      // Colores
      document.querySelectorAll('.color-picker span').forEach(el=>{
        el.addEventListener('click', ()=> currentDrawingColor = el.style.backgroundColor);
      });
      // Pinceles
      document.getElementById('thin').addEventListener('click', ()=> brushSize = 2);
      document.getElementById('medium').addEventListener('click', ()=> brushSize = 5);
      document.getElementById('thick').addEventListener('click', ()=> brushSize = 10);
      // Limpiar
      document.getElementById('clearBtn').addEventListener('click', ()=> ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height));
    }
    function startDrawing(e){ isDrawing = true; draw(e); }
    function draw(e){
      if (!isDrawing) return;
      const rect = e.target.getBoundingClientRect();
      let x, y;
      if (e.type.includes('touch')){ x = e.touches[0].clientX - rect.left; y = e.touches[0].clientY - rect.top; }
      else { x = e.clientX - rect.left; y = e.clientY - rect.top; }
      ctx.fillStyle = currentDrawingColor; ctx.beginPath(); ctx.arc(x,y,brushSize,0,Math.PI*2); ctx.fill();
    }
    function stopDrawing(){ isDrawing = false; }
    function handleTouchStart(e){ e.preventDefault(); startDrawing(e); }
    function handleTouchMove(e){ e.preventDefault(); draw(e); }

    setup();
  </script>
</body>
</html>
